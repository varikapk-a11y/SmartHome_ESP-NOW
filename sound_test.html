<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π —Ç–µ—Å—Ç –∑–≤—É–∫–∞ –¥–ª—è Android 4.4</title>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            padding: 20px; 
            background: #f5f5f5;
            max-width: 800px;
            margin: 0 auto;
        }
        .container { 
            background: white; 
            border-radius: 10px; 
            padding: 20px; 
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1, h2 { color: #333; }
        .test-section { 
            margin: 20px 0; 
            padding: 15px; 
            border: 1px solid #ddd; 
            border-radius: 5px;
        }
        .test-button { 
            margin: 5px; 
            padding: 10px 15px; 
            background: #4CAF50; 
            color: white; 
            border: none; 
            border-radius: 4px; 
            cursor: pointer;
            font-size: 16px;
            transition: background 0.3s;
        }
        .test-button:hover { background: #45a049; }
        .test-button.danger { background: #f44336; }
        .test-button.danger:hover { background: #d32f2f; }
        .test-button.warning { background: #ff9800; }
        .test-button.warning:hover { background: #f57c00; }
        .status { 
            margin-top: 10px; 
            padding: 10px; 
            border-radius: 4px; 
            display: none;
        }
        .success { background: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
        .error { background: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }
        .info { background: #d1ecf1; color: #0c5460; border: 1px solid #bee5eb; }
        .results { 
            margin-top: 20px; 
            padding: 15px; 
            background: #e8f4fd; 
            border-radius: 5px;
        }
        .sound-info { color: #666; font-size: 14px; }
        .method-label { 
            display: inline-block; 
            width: 250px; 
            font-weight: bold; 
            margin-right: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîä –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π —Ç–µ—Å—Ç –∑–≤—É–∫–∞ –¥–ª—è Android 4.4+</h1>
        <p class="sound-info">
            <strong>–¶–µ–ª—å:</strong> –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ –≤–æ–∑–º–æ–∂–Ω—ã–µ —Å–ø–æ—Å–æ–±—ã –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è –∑–≤—É–∫–∞ –Ω–∞ —Å—Ç–∞—Ä—ã—Ö Android —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö.<br>
            <strong>–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è:</strong> –ù–∞–∂–∏–º–∞–π—Ç–µ –∫–Ω–æ–ø–∫–∏ –ø–æ –ø–æ—Ä—è–¥–∫—É –∏ –∑–∞–ø–∏—Å—ã–≤–∞–π—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã.
        </p>
        
        <div class="test-section">
            <h2>1. –ë–∞–∑–æ–≤—ã–π Audio API (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –º–µ—Ç–æ–¥—ã)</h2>
            
            <div>
                <span class="method-label">Audio() –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä + play():</span>
                <button class="test-button" onclick="testMethod1()">–¢–µ—Å—Ç 1</button>
                <div id="status1" class="status"></div>
            </div>
            
            <div>
                <span class="method-label">createElement('audio') + play():</span>
                <button class="test-button" onclick="testMethod2()">–¢–µ—Å—Ç 2</button>
                <div id="status2" class="status"></div>
            </div>
            
            <div>
                <span class="method-label">createElement('audio') —Å –∞–≤—Ç–æ–∏–≥—Ä–æ–π:</span>
                <button class="test-button" onclick="testMethod3()">–¢–µ—Å—Ç 3</button>
                <div id="status3" class="status"></div>
            </div>
        </div>
        
        <div class="test-section">
            <h2>2. Web Audio API (—Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ç–æ–¥—ã)</h2>
            
            <div>
                <span class="method-label">Oscillator (—Å–∏–Ω—É—Å–æ–∏–¥–∞):</span>
                <button class="test-button" onclick="testMethod4()">–¢–µ—Å—Ç 4</button>
                <div id="status4" class="status"></div>
            </div>
            
            <div>
                <span class="method-label">Buffer —Å –∫–æ—Ä–æ—Ç–∫–∏–º –∑–≤—É–∫–æ–º:</span>
                <button class="test-button" onclick="testMethod5()">–¢–µ—Å—Ç 5</button>
                <div id="status5" class="status"></div>
            </div>
            
            <div>
                <span class="method-label">Oscillator —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π —Å–æ–±—ã—Ç–∏–π:</span>
                <button class="test-button warning" onclick="testMethod6()">–¢–µ—Å—Ç 6</button>
                <div id="status6" class="status"></div>
            </div>
        </div>
        
        <div class="test-section">
            <h2>3. –°—Ç–∞—Ä—ã–µ/–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã</h2>
            
            <div>
                <span class="method-label">HTML5 Audio —Å canplaythrough:</span>
                <button class="test-button" onclick="testMethod7()">–¢–µ—Å—Ç 7</button>
                <div id="status7" class="status"></div>
            </div>
            
            <div>
                <span class="method-label">Audio —Å user gesture –æ–±—ë—Ä—Ç–∫–æ–π:</span>
                <button class="test-button" onclick="testMethod8()">–¢–µ—Å—Ç 8</button>
                <div id="status8" class="status"></div>
            </div>
            
            <div>
                <span class="method-label">embed —ç–ª–µ–º–µ–Ω—Ç (—É—Å—Ç–∞—Ä–µ–≤—à–∏–π):</span>
                <button class="test-button" onclick="testMethod9()">–¢–µ—Å—Ç 9</button>
                <div id="status9" class="status"></div>
            </div>
        </div>
        
        <div class="test-section">
            <h2>4. –≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–ª—å–Ω—ã–µ –º–µ—Ç–æ–¥—ã</h2>
            
            <div>
                <span class="method-label">Audio –≤ iframe:</span>
                <button class="test-button warning" onclick="testMethod10()">–¢–µ—Å—Ç 10</button>
                <div id="status10" class="status"></div>
            </div>
            
            <div>
                <span class="method-label">–ù–µ—Å–∫–æ–ª—å–∫–æ Audio –æ–±—ä–µ–∫—Ç–æ–≤:</span>
                <button class="test-button warning" onclick="testMethod11()">–¢–µ—Å—Ç 11</button>
                <div id="status11" class="status"></div>
            </div>
            
            <div>
                <span class="method-label">AudioContext.resume() –≤ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–µ:</span>
                <button class="test-button danger" onclick="testMethod12()">–¢–µ—Å—Ç 12</button>
                <div id="status12" class="status"></div>
            </div>
        </div>
        
        <div class="test-section">
            <h2>5. –¢—Ä–µ–≤–æ–≥–∞ (—Å–∏—Ä–µ–Ω–∞) —Ç–µ—Å—Ç—ã</h2>
            
            <div>
                <span class="method-label">–ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏–π –∑–≤—É–∫ (1 —Å–µ–∫):</span>
                <button class="test-button" onclick="testAlarm1()">–¢–µ—Å—Ç —Å–∏—Ä–µ–Ω—ã A</button>
                <div id="alarmStatus1" class="status"></div>
            </div>
            
            <div>
                <span class="method-label">–ë—ã—Å—Ç—Ä–∞—è —Å–∏—Ä–µ–Ω–∞ (—á–∞—Å—Ç—ã–µ —Ç–æ–Ω—ã):</span>
                <button class="test-button warning" onclick="testAlarm2()">–¢–µ—Å—Ç —Å–∏—Ä–µ–Ω—ã B</button>
                <button class="test-button danger" onclick="stopAlarms()">–û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Å–µ</button>
                <div id="alarmStatus2" class="status"></div>
            </div>
        </div>
        
        <div class="results">
            <h2>üìã –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è</h2>
            <p id="resultsText">–ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫–∏ –≤—ã—à–µ, —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ...</p>
            <button class="test-button" onclick="saveResults()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã</button>
            <button class="test-button danger" onclick="clearResults()">–û—á–∏—Å—Ç–∏—Ç—å</button>
        </div>
    </div>

    <script>
        let testResults = [];
        let activeAlarms = [];
        
        // –ë–∞–∑–æ–≤—ã–π Audio API –º–µ—Ç–æ–¥—ã
        function testMethod1() {
            try {
                let audio = new Audio();
                audio.src = 'data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAZGF0YQQAAAAAAA==';
                audio.play();
                showStatus('status1', '‚úÖ –í–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –∑–∞–ø—É—â–µ–Ω–æ', 'success');
                testResults.push('–ú–µ—Ç–æ–¥ 1 (Audio –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä): –£–°–ü–ï–•');
            } catch (e) {
                showStatus('status1', '‚ùå –û—à–∏–±–∫–∞: ' + e.message, 'error');
                testResults.push('–ú–µ—Ç–æ–¥ 1 (Audio –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä): –û–®–ò–ë–ö–ê - ' + e.message);
            }
        }
        
        function testMethod2() {
            try {
                let audio = document.createElement('audio');
                audio.src = 'data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAZGF0YQQAAAAAAA==';
                audio.play();
                showStatus('status2', '‚úÖ –í–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –∑–∞–ø—É—â–µ–Ω–æ', 'success');
                testResults.push('–ú–µ—Ç–æ–¥ 2 (createElement audio): –£–°–ü–ï–•');
            } catch (e) {
                showStatus('status2', '‚ùå –û—à–∏–±–∫–∞: ' + e.message, 'error');
                testResults.push('–ú–µ—Ç–æ–¥ 2 (createElement audio): –û–®–ò–ë–ö–ê - ' + e.message);
            }
        }
        
        function testMethod3() {
            try {
                let audio = document.createElement('audio');
                audio.autoplay = true;
                audio.src = 'data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAZGF0YQQAAAAAAA==';
                showStatus('status3', '‚úÖ –ê–≤—Ç–æ–≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ', 'info');
                testResults.push('–ú–µ—Ç–æ–¥ 3 (autoplay audio): –ù–ê–°–¢–†–û–ô–ö–ê –í–´–ü–û–õ–ù–ï–ù–ê');
            } catch (e) {
                showStatus('status3', '‚ùå –û—à–∏–±–∫–∞: ' + e.message, 'error');
                testResults.push('–ú–µ—Ç–æ–¥ 3 (autoplay audio): –û–®–ò–ë–ö–ê - ' + e.message);
            }
        }
        
        // Web Audio API –º–µ—Ç–æ–¥—ã
        function testMethod4() {
            try {
                let audioContext = new (window.AudioContext || window.webkitAudioContext)();
                let oscillator = audioContext.createOscillator();
                oscillator.connect(audioContext.destination);
                oscillator.frequency.value = 800;
                oscillator.start();
                setTimeout(() => oscillator.stop(), 500);
                showStatus('status4', '‚úÖ –°–∏–Ω—É—Å–æ–∏–¥–∞–ª—å–Ω—ã–π —Ç–æ–Ω –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥—ë–Ω (500ms)', 'success');
                testResults.push('–ú–µ—Ç–æ–¥ 4 (Web Audio Oscillator): –£–°–ü–ï–•');
            } catch (e) {
                showStatus('status4', '‚ùå –û—à–∏–±–∫–∞: ' + e.message, 'error');
                testResults.push('–ú–µ—Ç–æ–¥ 4 (Web Audio Oscillator): –û–®–ò–ë–ö–ê - ' + e.message);
            }
        }
        
        function testMethod5() {
            try {
                let audioContext = new (window.AudioContext || window.webkitAudioContext)();
                let buffer = audioContext.createBuffer(1, 22050, 22050);
                let data = buffer.getChannelData(0);
                for (let i = 0; i < 22050; i++) {
                    data[i] = Math.sin(i * 0.1) * 0.1;
                }
                let source = audioContext.createBufferSource();
                source.buffer = buffer;
                source.connect(audioContext.destination);
                source.start();
                showStatus('status5', '‚úÖ –ë—É—Ñ–µ—Ä–Ω—ã–π –∑–≤—É–∫ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥—ë–Ω', 'success');
                testResults.push('–ú–µ—Ç–æ–¥ 5 (Web Audio Buffer): –£–°–ü–ï–•');
            } catch (e) {
                showStatus('status5', '‚ùå –û—à–∏–±–∫–∞: ' + e.message, 'error');
                testResults.push('–ú–µ—Ç–æ–¥ 5 (Web Audio Buffer): –û–®–ò–ë–ö–ê - ' + e.message);
            }
        }
        
        function testMethod6() {
            try {
                let audioContext = new (window.AudioContext || window.webkitAudioContext)();
                audioContext.resume().then(() => {
                    let oscillator = audioContext.createOscillator();
                    oscillator.connect(audioContext.destination);
                    oscillator.frequency.value = 600;
                    oscillator.start();
                    setTimeout(() => oscillator.stop(), 300);
                    showStatus('status6', '‚úÖ –í–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –ø–æ—Å–ª–µ resume()', 'success');
                    testResults.push('–ú–µ—Ç–æ–¥ 6 (AudioContext resume): –£–°–ü–ï–•');
                }).catch(e => {
                    showStatus('status6', '‚ùå –û—à–∏–±–∫–∞ resume: ' + e.message, 'error');
                    testResults.push('–ú–µ—Ç–æ–¥ 6 (AudioContext resume): –û–®–ò–ë–ö–ê - ' + e.message);
                });
            } catch (e) {
                showStatus('status6', '‚ùå –û—à–∏–±–∫–∞: ' + e.message, 'error');
                testResults.push('–ú–µ—Ç–æ–¥ 6 (AudioContext resume): –û–®–ò–ë–ö–ê - ' + e.message);
            }
        }
        
        // –°—Ç–∞—Ä—ã–µ –º–µ—Ç–æ–¥—ã
        function testMethod7() {
            try {
                let audio = new Audio();
                audio.src = 'data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAZGF0YQQAAAAAAA==';
                audio.addEventListener('canplaythrough', () => {
                    audio.play();
                    showStatus('status7', '‚úÖ –í–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –ø–æ—Å–ª–µ canplaythrough', 'success');
                    testResults.push('–ú–µ—Ç–æ–¥ 7 (canplaythrough): –£–°–ü–ï–•');
                });
                audio.load();
            } catch (e) {
                showStatus('status7', '‚ùå –û—à–∏–±–∫–∞: ' + e.message, 'error');
                testResults.push('–ú–µ—Ç–æ–¥ 7 (canplaythrough): –û–®–ò–ë–ö–ê - ' + e.message);
            }
        }
        
        function testMethod8() {
            try {
                // –ü–æ–ø—ã—Ç–∫–∞ –æ–±–æ–π—Ç–∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –∂–µ—Å—Ç–∞
                let audio = new Audio();
                audio.src = 'data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAZGF0YQQAAAAAAA==';
                audio.volume = 1.0;
                
                // –ù–µ—Å–∫–æ–ª—å–∫–æ –ø–æ–ø—ã—Ç–æ–∫ –∑–∞–ø—É—Å–∫–∞
                let playPromise = audio.play();
                if (playPromise !== undefined) {
                    playPromise.then(() => {
                        showStatus('status8', '‚úÖ Promise –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω', 'success');
                        testResults.push('–ú–µ—Ç–æ–¥ 8 (Promise play): –£–°–ü–ï–•');
                    }).catch(e => {
                        // –ü—Ä–æ–±—É–µ–º –µ—â–µ —Ä–∞–∑
                        setTimeout(() => audio.play(), 100);
                        showStatus('status8', '‚ö†Ô∏è –ü–µ—Ä–≤–∞—è –ø–æ–ø—ã—Ç–∫–∞ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∞, –≤—Ç–æ—Ä–∞—è –∑–∞–ø—É—â–µ–Ω–∞', 'info');
                        testResults.push('–ú–µ—Ç–æ–¥ 8 (Promise play): –ü–û–í–¢–û–†–ù–ê–Ø –ü–û–ü–´–¢–ö–ê');
                    });
                }
            } catch (e) {
                showStatus('status8', '‚ùå –û—à–∏–±–∫–∞: ' + e.message, 'error');
                testResults.push('–ú–µ—Ç–æ–¥ 8 (Promise play): –û–®–ò–ë–ö–ê - ' + e.message);
            }
        }
        
        function testMethod9() {
            try {
                // –£—Å—Ç–∞—Ä–µ–≤—à–∏–π –º–µ—Ç–æ–¥ embed –¥–ª—è —Å—Ç–∞—Ä—ã—Ö –±—Ä–∞—É–∑–µ—Ä–æ–≤
                let embed = document.createElement('embed');
                embed.src = 'data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAZGF0YQQAAAAAAA==';
                embed.type = 'audio/wav';
                embed.style.display = 'none';
                document.body.appendChild(embed);
                showStatus('status9', '‚úÖ Embed —ç–ª–µ–º–µ–Ω—Ç —Å–æ–∑–¥–∞–Ω (—É—Å—Ç–∞—Ä–µ–≤—à–∏–π –º–µ—Ç–æ–¥)', 'info');
                testResults.push('–ú–µ—Ç–æ–¥ 9 (embed —ç–ª–µ–º–µ–Ω—Ç): –°–û–ó–î–ê–ù');
            } catch (e) {
                showStatus('status9', '‚ùå –û—à–∏–±–∫–∞: ' + e.message, 'error');
                testResults.push('–ú–µ—Ç–æ–¥ 9 (embed —ç–ª–µ–º–µ–Ω—Ç): –û–®–ò–ë–ö–ê - ' + e.message);
            }
        }
        
        // –≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–ª—å–Ω—ã–µ –º–µ—Ç–æ–¥—ã
        function testMethod10() {
            try {
                // –ê—É–¥–∏–æ –≤–Ω—É—Ç—Ä–∏ iframe –º–æ–∂–µ—Ç –æ–±–æ–π—Ç–∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
                let iframe = document.createElement('iframe');
                iframe.style.display = 'none';
                document.body.appendChild(iframe);
                
                let audio = iframe.contentDocument.createElement('audio');
                audio.src = 'data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAZGF0YQQAAAAAAA==';
                audio.play();
                
                showStatus('status10', '‚úÖ Audio –≤ iframe —Å–æ–∑–¥–∞–Ω–æ', 'info');
                testResults.push('–ú–µ—Ç–æ–¥ 10 (iframe audio): –°–û–ó–î–ê–ù');
            } catch (e) {
                showStatus('status10', '‚ùå –û—à–∏–±–∫–∞: ' + e.message, 'error');
                testResults.push('–ú–µ—Ç–æ–¥ 10 (iframe audio): –û–®–ò–ë–ö–ê - ' + e.message);
            }
        }
        
        function testMethod11() {
            try {
                // –°–æ–∑–¥–∞–Ω–∏–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∞—É–¥–∏–æ –æ–±—ä–µ–∫—Ç–æ–≤
                for (let i = 0; i < 3; i++) {
                    let audio = new Audio();
                    audio.src = 'data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAZGF0YQQAAAAAAA==';
                    audio.play().catch(() => { /* –∏–≥–Ω–æ—Ä–∏—Ä—É–µ–º –æ—à–∏–±–∫–∏ */ });
                }
                showStatus('status11', '‚úÖ 3 Audio –æ–±—ä–µ–∫—Ç–∞ —Å–æ–∑–¥–∞–Ω—ã', 'info');
                testResults.push('–ú–µ—Ç–æ–¥ 11 (–Ω–µ—Å–∫–æ–ª—å–∫–æ Audio): –°–û–ó–î–ê–ù–´');
            } catch (e) {
                showStatus('status11', '‚ùå –û—à–∏–±–∫–∞: ' + e.message, 'error');
                testResults.push('–ú–µ—Ç–æ–¥ 11 (–Ω–µ—Å–∫–æ–ª—å–∫–æ Audio): –û–®–ò–ë–ö–ê - ' + e.message);
            }
        }
        
        function testMethod12() {
            try {
                // –ü–æ–ø—ã—Ç–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–æ–±—ã—Ç–∏–µ touchstart –¥–ª—è –∞–∫—Ç–∏–≤–∞—Ü–∏–∏
                document.addEventListener('touchstart', function activateAudio() {
                    let audioContext = new (window.AudioContext || window.webkitAudioContext)();
                    audioContext.resume().then(() => {
                        let oscillator = audioContext.createOscillator();
                        oscillator.connect(audioContext.destination);
                        oscillator.frequency.value = 1000;
                        oscillator.start();
                        setTimeout(() => oscillator.stop(), 200);
                    });
                    document.removeEventListener('touchstart', activateAudio);
                }, {once: true});
                
                showStatus('status12', '‚úÖ –û–±—Ä–∞–±–æ—Ç—á–∏–∫ touchstart —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω', 'info');
                testResults.push('–ú–µ—Ç–æ–¥ 12 (touchstart –∞–∫—Ç–∏–≤–∞—Ü–∏—è): –ù–ê–°–¢–†–û–ô–ö–ê –í–´–ü–û–õ–ù–ï–ù–ê');
            } catch (e) {
                showStatus('status12', '‚ùå –û—à–∏–±–∫–∞: ' + e.message, 'error');
                testResults.push('–ú–µ—Ç–æ–¥ 12 (touchstart –∞–∫—Ç–∏–≤–∞—Ü–∏—è): –û–®–ò–ë–ö–ê - ' + e.message);
            }
        }
        
        // –¢–µ—Å—Ç—ã —Ç—Ä–µ–≤–æ–≥–∏ (—Å–∏—Ä–µ–Ω—ã)
        function testAlarm1() {
            try {
                let audioContext = new (window.AudioContext || window.webkitAudioContext)();
                let oscillator = audioContext.createOscillator();
                oscillator.connect(audioContext.destination);
                oscillator.frequency.value = 900;
                oscillator.start();
                
                activeAlarms.push({oscillator: oscillator, context: audioContext});
                
                setTimeout(() => {
                    oscillator.stop();
                    // –£–¥–∞–ª—è–µ–º –∏–∑ –∞–∫—Ç–∏–≤–Ω—ã—Ö
                    let index = activeAlarms.findIndex(a => a.oscillator === oscillator);
                    if (index > -1) activeAlarms.splice(index, 1);
                }, 1000);
                
                showStatus('alarmStatus1', '‚úÖ –°–∏—Ä–µ–Ω–∞ (1 —Å–µ–∫) –∑–∞–ø—É—â–µ–Ω–∞', 'success');
                testResults.push('–°–∏—Ä–µ–Ω–∞ A (1 —Å–µ–∫): –ó–ê–ü–£–©–ï–ù–ê');
            } catch (e) {
                showStatus('alarmStatus1', '‚ùå –û—à–∏–±–∫–∞ —Å–∏—Ä–µ–Ω—ã: ' + e.message, 'error');
                testResults.push('–°–∏—Ä–µ–Ω–∞ A: –û–®–ò–ë–ö–ê - ' + e.message);
            }
        }
        
        function testAlarm2() {
            try {
                let audioContext = new (window.AudioContext || window.webkitAudioContext)();
                
                function playTone(freq, duration) {
                    let oscillator = audioContext.createOscillator();
                    oscillator.connect(audioContext.destination);
                    oscillator.frequency.value = freq;
                    oscillator.start();
                    
                    setTimeout(() => oscillator.stop(), duration);
                }
                
                // –ë—ã—Å—Ç—Ä–∞—è —Å–∏—Ä–µ–Ω–∞ (—á–µ—Ä–µ–¥—É—é—â–∏–µ—Å—è —Ç–æ–Ω—ã)
                let interval = setInterval(() => {
                    playTone(800, 100);
                    setTimeout(() => playTone(1200, 100), 200);
                }, 500);
                
                let alarmObj = {interval: interval, context: audioContext};
                activeAlarms.push(alarmObj);
                
                // –ê–≤—Ç–æ–æ—Å—Ç–∞–Ω–æ–≤–∫–∞ —á–µ—Ä–µ–∑ 5 —Å–µ–∫
                setTimeout(() => {
                    clearInterval(interval);
                    let index = activeAlarms.findIndex(a => a.interval === interval);
                    if (index > -1) activeAlarms.splice(index, 1);
                }, 5000);
                
                showStatus('alarmStatus2', '‚úÖ –ë—ã—Å—Ç—Ä–∞—è —Å–∏—Ä–µ–Ω–∞ –∑–∞–ø—É—â–µ–Ω–∞ (5 —Å–µ–∫)', 'success');
                testResults.push('–°–∏—Ä–µ–Ω–∞ B (–±—ã—Å—Ç—Ä–∞—è): –ó–ê–ü–£–©–ï–ù–ê');
            } catch (e) {
                showStatus('alarmStatus2', '‚ùå –û—à–∏–±–∫–∞ —Å–∏—Ä–µ–Ω—ã: ' + e.message, 'error');
                testResults.push('–°–∏—Ä–µ–Ω–∞ B: –û–®–ò–ë–ö–ê - ' + e.message);
            }
        }
        
        function stopAlarms() {
            activeAlarms.forEach(alarm => {
                if (alarm.oscillator) alarm.oscillator.stop();
                if (alarm.interval) clearInterval(alarm.interval);
                if (alarm.context) alarm.context.close();
            });
            activeAlarms = [];
            showStatus('alarmStatus1', '‚èπÔ∏è –í—Å–µ —Å–∏—Ä–µ–Ω—ã –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã', 'info');
            showStatus('alarmStatus2', '‚èπÔ∏è –í—Å–µ —Å–∏—Ä–µ–Ω—ã –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã', 'info');
        }
        
        // –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
        function showStatus(elementId, message, type) {
            let element = document.getElementById(elementId);
            element.textContent = message;
            element.className = 'status ' + type;
            element.style.display = 'block';
            
            // –û–±–Ω–æ–≤–ª—è–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
            updateResults();
        }
        
        function updateResults() {
            let resultsText = document.getElementById('resultsText');
            resultsText.innerHTML = '<strong>–¢–µ—Å—Ç–æ–≤ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ:</strong> ' + testResults.length + '<br><br>';
            
            testResults.forEach((result, index) => {
                let color = result.includes('–£–°–ü–ï–•') ? 'green' : 
                           result.includes('–û–®–ò–ë–ö–ê') ? 'red' : 'orange';
                resultsText.innerHTML += `<span style="color: ${color}">${index + 1}. ${result}</span><br>`;
            });
        }
        
        function saveResults() {
            let resultsString = "=== –†–ï–ó–£–õ–¨–¢–ê–¢–´ –¢–ï–°–¢–ê –ó–í–£–ö–ê ===\n–î–∞—Ç–∞: " + new Date().toLocaleString() + "\n\n";
            resultsString += testResults.join('\n');
            
            // –°–æ–∑–¥–∞–µ–º blob –∏ —Å—Å—ã–ª–∫—É –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è
            let blob = new Blob([resultsString], {type: 'text/plain'});
            let url = URL.createObjectURL(blob);
            let a = document.createElement('a');
            a.href = url;
            a.download = 'sound-test-results-' + Date.now() + '.txt';
            a.click();
            
            showStatus('resultsText', '‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ —Ñ–∞–π–ª', 'success');
        }
        
        function clearResults() {
            testResults = [];
            updateResults();
            let statusElements = document.querySelectorAll('.status');
            statusElements.forEach(el => {
                el.style.display = 'none';
            });
        }
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        document.addEventListener('DOMContentLoaded', () => {
            updateResults();
            console.log('–¢–µ—Å—Ç –∑–≤—É–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω. –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–æ–¥–¥–µ—Ä–∂–∫—É Web Audio API:', 
                       !!(window.AudioContext || window.webkitAudioContext));
        });
    </script>
</body>
</html>