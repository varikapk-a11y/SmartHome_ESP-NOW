<!-- –ë–ª–æ–∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∑–≤—É–∫–∞ -->
<div style="padding: 20px; background: #e8f4fd; border-radius: 8px; margin-top: 20px;">
    <h3>üîä –¢–µ—Å—Ç –∑–≤—É–∫–æ–≤—ã—Ö —Å—Ö–µ–º (Android 10)</h3>
    <p><strong>–†–∞–±–æ—á–∏–µ —Å—Ö–µ–º—ã:</strong></p>
    <ul>
        <li><strong>playBeep</strong> ‚Äî –∫–æ—Ä–æ—Ç–∫–∏–π —Å–∏–≥–Ω–∞–ª (800 –ì—Ü, 500–º—Å).</li>
        <li><strong>playAlarmTone</strong> ‚Äî —Å–∏—Ä–µ–Ω–∞ —Ç—Ä–µ–≤–æ–≥–∏ (—Ü–∏–∫–ª 800/1200 –ì—Ü).</li>
    </ul>

    <div style="margin: 15px 0;">
        <button onclick="testPlayBeep()" style="padding: 12px 25px; background: #3498db; color: white; border: none; border-radius: 5px; font-size: 16px; cursor: pointer; margin-right: 10px;">
            ‚ñ∂ –ó–∞–ø—É—Å—Ç–∏—Ç—å –ö–æ—Ä–æ—Ç–∫–∏–π –°–∏–≥–Ω–∞–ª (Beep)
        </button>
        <button onclick="testPlayAlarm()" style="padding: 12px 25px; background: #e74c3c; color: white; border: none; border-radius: 5px; font-size: 16px; cursor: pointer;">
            üö® –ó–∞–ø—É—Å—Ç–∏—Ç—å –°–∏—Ä–µ–Ω—É –¢—Ä–µ–≤–æ–≥–∏ (Alarm)
        </button>
        <button onclick="stopAlarmTone()" style="padding: 12px 25px; background: #95a5a6; color: white; border: none; border-radius: 5px; font-size: 16px; cursor: pointer; margin-left: 10px;">
            ‚èπ –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –°–∏—Ä–µ–Ω—É
        </button>
    </div>
</div>

<script>
// ====================== –ú–ï–ù–ï–î–ñ–ï–† –ê–£–î–ò–û ======================
let audioContext = null;
let alarmInterval = null;
let isAlarmPlaying = false;

// 1. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∞—É–¥–∏–æ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∫–ª–∏–∫–µ
function initAudioOnFirstTouch() {
    if (!audioContext) {
        audioContext = new (window.AudioContext || window.webkitAudioContext)();
        console.log('AudioContext –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω');
        document.removeEventListener('click', initAudioOnFirstTouch);
        document.removeEventListener('touchstart', initAudioOnFirstTouch);
    }
}
document.addEventListener('click', initAudioOnFirstTouch);
document.addEventListener('touchstart', initAudioOnFirstTouch);

// 2. –ö–û–†–û–¢–ö–ò–ô –°–ò–ì–ù–ê–õ (Beep) - –∏–∑ —Ç–µ—Å—Ç–∞ 4
function playBeep() {
    if (!audioContext) initAudioOnFirstTouch();
    try {
        const oscillator = audioContext.createOscillator();
        const gainNode = audioContext.createGain();
        oscillator.connect(gainNode);
        gainNode.connect(audioContext.destination);
        oscillator.frequency.value = 800;
        oscillator.type = 'sine';
        gainNode.gain.value = 0.3;
        oscillator.start();
        gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.5);
        oscillator.stop(audioContext.currentTime + 0.5);
    } catch(e) {
        console.log('–û—à–∏–±–∫–∞ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è beep:', e);
    }
}

// 3. –°–ò–†–ï–ù–ê –¢–†–ï–í–û–ì–ò (Alarm) - –∏–∑ —Ç–µ—Å—Ç–∞ "–°–∏—Ä–µ–Ω–∞ B"
function playAlarmTone() {
    if (isAlarmPlaying) return;
    if (!audioContext) initAudioOnFirstTouch();
    try {
        isAlarmPlaying = true;
        function playAlarmPulse(freq, duration) {
            if (!audioContext) return;
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);
            oscillator.frequency.value = freq;
            oscillator.type = 'sawtooth';
            gainNode.gain.value = 0.15;
            oscillator.start();
            gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + duration);
            oscillator.stop(audioContext.currentTime + duration);
        }
        alarmInterval = setInterval(() => {
            playAlarmPulse(800, 0.1);
            setTimeout(() => { playAlarmPulse(1200, 0.1); }, 150);
        }, 500);
        console.log('–°–∏—Ä–µ–Ω–∞ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–∞');
    } catch(e) {
        console.log('–û—à–∏–±–∫–∞ –∑–∞–ø—É—Å–∫–∞ —Å–∏—Ä–µ–Ω—ã:', e);
        isAlarmPlaying = false;
    }
}

// 4. –û–°–¢–ê–ù–û–í–ö–ê –°–ò–†–ï–ù–´
function stopAlarmTone() {
    if (!isAlarmPlaying) return;
    isAlarmPlaying = false;
    if (alarmInterval) {
        clearInterval(alarmInterval);
        alarmInterval = null;
    }
    console.log('–°–∏—Ä–µ–Ω–∞ –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞');
}

// 5. –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è –∫–Ω–æ–ø–æ–∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
function testPlayBeep() {
    playBeep();
    console.log('–¢–µ—Å—Ç: –ó–∞–ø—É—â–µ–Ω –∫–æ—Ä–æ—Ç–∫–∏–π —Å–∏–≥–Ω–∞–ª');
}
function testPlayAlarm() {
    playAlarmTone();
    console.log('–¢–µ—Å—Ç: –ó–∞–ø—É—â–µ–Ω–∞ —Å–∏—Ä–µ–Ω–∞');
}
</script>